<ion-content class="ion-padding-vertical">
  <ion-grid class="ion-padding" *ngIf="user">
    <ion-row>
      <ion-col size="9">
        <ion-label>
          <h2>¡Hola!</h2>
          <h1>{{ user.name }} {{ user.lastname }}</h1>
        </ion-label>
      </ion-col>
      <ion-col size="3" class="profile-img">
        <ion-avatar class="ion-no-margin">
          <img
            src="{{ user.image_url }}"
            alt="User avatar"
            [routerLink]="['/profile']"
          />
        </ion-avatar>
        <ion-label>
          <p [routerLink]="['/profile']">Ver perfil</p>
        </ion-label>
      </ion-col>
    </ion-row>
  </ion-grid>

  <div class="ion-padding chart-card">
    <ion-label> Rendimiento </ion-label>
    <ion-card>
      <ion-grid>
        <ion-row>
          <ion-col size="4" class="col-1-chart">
            <h2 class="ion-no-margin" *ngIf="graphicData">
              {{graphicData.visits}}
            </h2>
            <p class="ion-no-margin">Días en planta</p>
            <p class="ion-no-margin">en el 2020</p>
          </ion-col>
          <ion-col size="8">
            <canvas #barCanvas></canvas>
          </ion-col>
        </ion-row>
      </ion-grid>
    </ion-card>
  </div>

  <div class="ion-padding">
    <ion-searchbar 
      placeholder="Buscar SCTR"  
      mode="ios"
      (ionInput)="handleInput($event)"
      ></ion-searchbar>
    <div>
      <ion-list mode="ios">
        <ion-item
          class="ion-margin-vertical"
          *ngFor="let insuranceType of insuranceTypes"
          lines="none"
        >
          <ion-avatar>
            <img src="{{ insuranceType.insurence.insucompany.image_url }}" />
          </ion-avatar>
          <ion-label class="ion-padding-start">
            <h2>SCTR {{ insuranceType.insurence.type.name }}</h2>
            <p>{{ insuranceType.insurence.from_format }}</p>
          </ion-label>
          <ion-button
            color="success"
            (click) = "navigateToInsurance(insuranceType.insurence_id)"
            mode="ios"
          >
            Ver más
          </ion-button>
        </ion-item>
      </ion-list>
    </div>
  </div>
  <app-footer></app-footer>
</ion-content>
